@using System.Web
@model IEnumerable<SistemasAnaliticos.ViewModels.AuditViewModel>

@{
    var listaAudit = Model ?? Enumerable.Empty<AuditViewModel>();
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        :root {
            --primary-color: #012473;
            --secondary-color: #013599;
            --danger-color: #E00319;
            --success-color: #198754;
        }

        .bg-gradient-custom {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .btn-custom-primary {
            background-color: #012473;
            border-color: #012473;
            color: white;
        }

            .btn-custom-primary:hover {
                background-color: #013599;
                border-color: #013599;
                color: white;
            }

        .header-card {
            border-radius: 12px;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            background-color: white;
        }

        /* Estilos para la tabla */
        .table-custom {
            width: 100%;
            border-collapse: collapse;
        }

            .table-custom th {
                background-color: #f8f9fa;
                padding: 12px;
                text-align: center;
                border-bottom: 2px solid #dee2e6;
                font-weight: 600;
            }

            .table-custom td {
                padding: 12px;
                text-align: center;
                border-bottom: 1px solid #dee2e6;
                vertical-align: middle;
            }

            .table-custom tr:hover {
                background-color: #f8f9fa;
            }
    </style>
</head>
<body class="bg-gradient-custom min-vh-100">

    <main class="container-xxl px-4 px-sm-6 px-lg-8 py-4">

        <!-- Header -->
        <div class="header-card p-4 mt-4 d-flex justify-content-between gap-2 mb-4">
            <h1 class="h2 fw-bold text-gray-900 mb-0">
                Lista de Acciones
            </h1>
        </div>

        <!-- Tabla de Fotos -->
        <div class="card shadow-sm">
            <div class="card-body p-0">
                @if (!listaAudit.Any())
                {
                    <div id="emptyState">
                        <div style="border-radius: 12px; border: none; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); background-color: white;">
                            <div style="display: flex; align-items: center; justify-content: space-around; padding: 2rem;">
                                <p style="color: #6c757d; margin: 0; text-align: left; font-size: 1rem;">
                                    No se encontraron datos de auditorias.
                                </p>

                                <div id="lottie-animation" style="width: 110px; height: 110px; flex-shrink: 0;"></div>

                                <script>
                                    const animation = document.createElement('lottie-player');
                                    animation.setAttribute('src', '/lottie/loading.json');
                                    animation.setAttribute('background', 'transparent');
                                    animation.setAttribute('speed', '1');
                                    animation.setAttribute('style', 'width: 110px; height: 110px;');
                                    animation.setAttribute('loop', '');
                                    animation.setAttribute('autoplay', '');
                                    document.getElementById('lottie-animation').appendChild(animation);
                                </script>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="table-responsive">
                        <table class="table table-custom table-hover mb-0">
                            <thead>
                                <tr>
                                    <th class="text-center">Fecha</th>
                                    <th class="text-center">Hora</th>
                                    <th class="text-center">Usuario</th>
                                    <th class="text-center">Tabla</th>
                                    <th class="text-center">Acción</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in listaAudit)
                                {
                                    <tr class="align-middle">
                                        <td class="text-center">@item.Fecha.ToString("dd MMM yyyy")</td>
                                        <td class="text-center">
                                            @DateTime.Today.Add(item.Hora).ToString("hh:mm tt")
                                        </td>
                                        <td class="text-center">@item.Usuario</td>
                                        <td class="text-center">@item.Tabla</td>
                                        <td class="text-center">@item.Accion</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
            </div>
        </div>
    </main>
</body>
</html>